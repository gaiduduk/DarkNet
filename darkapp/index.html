<style>

    .file-line {
        font-weight: 600;
        font-size: 18px;
    }

    .file-line:hover {
        background: #3b3b3b;
        text-decoration: underline;
    }

    .file_name {
        padding-left: 24px;
    }

</style>
<div class="layout-fill layout-row" ng-cloak>
    <div class="layout-column flex-30 scrollable">
        <div class="flex scrollable" ng-show="!toggleCreateAppFragment">
            <div class="layout-column header">
                <div class="layout-row flex" style="padding: 5px 16px 0 16px">
                    <md-input-container class="flex">
                        <label>Search</label>
                        <md-icon md-svg-src="img/search.svg"></md-icon>
                        <input type="text" autocomplete="off" ng-model="searchText">
                    </md-input-container>
                </div>
                <md-progress-linear md-mode="query" ng-disabled="!search_request_in_progress"></md-progress-linear>
            </div>
            <div class="layout-column" ng-repeat="item in apps">
                <md-content class="layout-row layout-align-start-center" md-ink-ripple
                            ng-click="openApp(item)"
                            style="padding: 24px 16px;">
                    {{item.domain_name}}
                    <div class="flex"></div>
                    <md-button class="md-raised" style="background-color: lightgreen"
                               ng-click="downloadApp(item); $event.stopPropagation();">
                        Download
                    </md-button>
                </md-content>
                <md-divider></md-divider>
            </div>
        </div>
        <md-button class="md-raised md-primary header" ng-click="toggleCreateAppFragment = !toggleCreateAppFragment">
            Create app
        </md-button>
        <div class="layout-column layout-align-center-center flex" ng-show="toggleCreateAppFragment"
             style="background-color: #444444">
            <form class="input-wrapper layout-column" target="_blank"
                  ng-submit="createCoin()">
                <input type="hidden" name="token" value="{{token}}">
                <div class="input-header layout-row layout-align-center">
                    <h3>Create app</h3>
                </div>
                <md-content class="input-container layout-column">
                    <md-input-container>
                        <input ng-model="app_name" required minlength="3" maxlength="30" placeholder="Name">
                    </md-input-container>

                    <div ng-show="create_app_message != null" style="color: red">{{create_app_message}}</div>
                    <md-button type="submit" class="md-raised md-primary" ng-click="createApp()">
                        Create app
                        <md-progress-linear md-mode="query"
                                            ng-disabled="!create_app_request_in_progress"></md-progress-linear>
                    </md-button>
                </md-content>
            </form>
        </div>
    </div>


    <div class="layout-column flex">
        <div class="flex scrollable" ng-show="!toggleExplorerFragment">
            <div class="layout-row layout-align-center-center header">
                {{app.domain_name}}
            </div>
            <div class="layout-column" style="padding: 16px">
                <div class="layout-row">
                    <img src="/{{app.domain_name}}/logo.png"
                         style="width:200px; height: 200px; background: url(img/logo_default.jpg); background-size: 100% 100%;"
                         alt="">
                    <div class="layout-column  flex" style="padding-left: 16px">
                        <div class="layout-row layout-align-start-center">
                            <h1>{{app.domain_name}}</h1>
                            <div class="flex"></div>
                            <h3>{{app.author}}</h3>
                        </div>
                        <h3 style="padding: 16px 0;">
                            {{app.descripition}}
                        </h3>
                    </div>
                </div>
                <div class="layout-row flex" style="padding-top: 16px">
                    Readme.md
                </div>
            </div>
        </div>
        <md-button class="md-raised md-primary header" ng-click="toggleExplorerFragment = !toggleExplorerFragment">
            File explorer
        </md-button>
        <div class="layout-row " style="padding: 24px;" ng-show="toggleExplorerFragment">
            <div class="layout-column input-wrapper flex">
                <div class="layout-row input-header">
                    <div class="layout-row">
                        <h2>{{path()}}</h2>
                    </div>
                    <div class="flex"></div>

                    <md-button style="background-color: #58a75d; margin-right: 16px" ng-click="upload()">
                        + File
                    </md-button>
                    <md-button style="background-color: #58a75d; margin-right: 16px">
                        + Dir
                    </md-button>
                </div>
                <md-content class="layout-column file-line" ng-repeat="file in files" md-ink-ripple>
                    <div class="layout-row" style="padding: 20px;">
                        <md-icon md-svg-src="{{file.file_size == 0 ? 'img/folder.svg' : 'img/file.svg'}}"
                                 ng-style="{'color': (file.file_size == 0 ? 'white' : '#b0b0b0')}"></md-icon>
                        <div class="file_name" style=" ">{{file.file_name}}</div>
                        <div class="flex"></div>
                        {{file.file_size == 0 ? "" : file.file_size}}
                        <md-menu md-position-mode="target-right target">
                            <md-button aria-label="Open demo menu" class="md-icon-button"
                                       ng-click="$mdMenu.open($event)">
                                <md-icon md-menu-origin md-svg-icon="img/menu.svg"></md-icon>
                            </md-button>
                            <md-menu-content width="4">
                                <md-menu-item>
                                    <md-button ng-click="delete(file)">
                                        Delete
                                    </md-button>
                                </md-menu-item>
                            </md-menu-content>
                        </md-menu>
                    </div>
                    <md-divider></md-divider>
                </md-content>
            </div>
        </div>
    </div>
</div>



